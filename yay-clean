# yay-clean command to do system maintenance

#!/bin/bash

echo "Starting system cleanup..."

# 1. Clear Package Cache
echo "Clearing package cache..."
sudo paccache -r

# 2. Remove Orphaned Packages
echo "Removing orphaned packages..."
sudo pacman -Qdtq | sudo pacman -Rns -

# 3. Clean up the AUR
echo "Cleaning up the AUR cache..."
yay -Yc

# 4. Clean Pacman Cache Manually
echo "Cleaning pacman cache, keeping only the latest version..."
sudo paccache -rk1

# 5. Remove Old Kernels
echo "Listing installed kernels..."
installed_kernels=$(ls /boot/vmlinuz-linux*)

# Assuming you want to remove all but the current kernel
current_kernel=$(uname -r)

for kernel in ${installed_kernels}; do
    if [[ "${kernel}" != *"${current_kernel}"* ]]; then
        kernel_version=$(echo "${kernel}" | sed 's/\/boot\/vmlinuz-linux//')
        echo "Removing old kernel: ${kernel_version}"
        sudo pacman -R linux${kernel_version}
    fi
done

# 6. Delete Old Configuration Files
echo "Deleting old configuration files older than one year..."
find ~/.config -type f -mtime +365 -exec rm {} \;

# 7. Review and Clean Your Home Directory
echo "Cleaning temporary files from the home directory..."
# Note: This is a basic cleanup, you might want to customize it further
rm -rf ~/Downloads/* ~/Documents/*

echo "System cleanup completed."
